<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://kauri.io/single/get-started-with-colonyjs/">
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Get Started with colonyJS - kauri.io</title>
    <link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../js/jquery-3.2.1.min.js"></script>
    <script src="../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Get Started with colonyJS", url: "#_top", children: [
              {title: "Initial Setup", url: "#initial-setup" },
              {title: "Example Script", url: "#example-script" },
          ]},
        ];

    </script>
    <script src="../../js/base.js"></script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-172017815-1', 'kauri.io');
        ga('send', 'pageview');
    </script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    <h1 id="get-started-with-colonyjs">Get Started with colonyJS<a class="headerlink" href="#get-started-with-colonyjs" title="Permanent link"></a></h1>
<p><img alt="" src="https://ipfs.infura.io/ipfs/QmRFKepurowu9QWTkQZGsCCmn81WbzEMo1ecvGLNWPnM96" /></p>
<p>This article will show you how to use <a href="https://github.com/JoinColony/colonyJS">colonyJS</a> to connect to the network, create a token, create a colony, and make a payment. We will be using the <code>goerli</code> test network, so make sure you have an Ethereum wallet with some test Ether before getting started. If you have never created an Ethereum wallet, check out <a href="https://medium.com/compound-finance/the-beginners-guide-to-using-an-ethereum-test-network-95bbbc85fc1d">this article</a>. To get some test Ether, you can use <a href="https://faucet.goerli.mudit.blog">Goerli Authenticated Faucet</a>.</p>
<p><em>Note: If you would prefer to do this locally, check out <a href="https://docs.colony.io/colonyjs/intro-local-setup">Local Setup</a> and come back here once you have your local environment set up. You will need to use the private key of the first ganache test account and change <code>goerli</code> to <code>local</code> in the <code>getNetworkClient</code> method.</em></p>
<h3 id="initial-setup">Initial Setup<a class="headerlink" href="#initial-setup" title="Permanent link"></a></h3>
<h4 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link"></a></h4>
<p>For this example, you will need the following:</p>
<ul>
<li>Node <code>&gt;=10.12.0</code></li>
<li>Yarn <code>&gt;=1.12.0</code></li>
</ul>
<h4 id="project-directory">Project Directory<a class="headerlink" href="#project-directory" title="Permanent link"></a></h4>
<p>First, open up your terminal and move to your project directory. You can create a new project or use an existing project. If you create a new project, you will need to run <code>yarn init</code>.</p>
<p><em>Note: If you are using an existing project that uses <code>npm</code> or you would prefer to use <code>npm</code>, feel free to do so, just keep in mind that you will need to substitute <code>yarn</code> commands for <code>npm</code> commands throughout the instructions provided in this example.</em></p>
<h4 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link"></a></h4>
<p>For this example, you will need the following packages:</p>
<ul>
<li><code>@colony/colony-js-client</code></li>
<li><code>@colony/purser-software</code></li>
<li><code>web3-utils</code></li>
</ul>
<p>Install the packages with the following command:</p>
<pre><code class="language-bash">yarn add @colony/colony-js-client @colony/purser-software web3-utils
</code></pre>
<h3 id="example-script">Example Script<a class="headerlink" href="#example-script" title="Permanent link"></a></h3>
<p>You will create a simple Node script. The script will run through the necessary steps to connect to the network, create a token, create a colony, and make a payment. A working example using the same methods can be found in the <a href="https://github.com/JoinColony/colonyStarter/tree/master/packages/colony-starter">colony-starter</a> package.</p>
<p>Create a <code>colony.js</code> file in the root of your project and add the following code:</p>
<pre><code class="language-js">
const { getNetworkClient } = require('@colony/colony-js-client');
const { open } = require('@colony/purser-software');
const { BN } = require('web3-utils');

(async () =&gt; {

  // Step 1: Open Wallet

  // Step 2: Get Network Client

  // Step 3: Create Token

  // Step 4: Create Colony

  // Step 5: Get Colony Client

  // Step 6: Mint Tokens

  // Step 7: Claim Colony Funds

  // Step 8: Add Payment

  // Step 9: Move Funds

  // Step 10: Finalize Payment

  // Step 11: Claim Payment

})()
  .then(() =&gt; process.exit())
  .catch(error =&gt; console.error(error));

</code></pre>
<p><em>Note: If you change the input values and encounter a bug, it is not necessary to call every method again. For example, if you provide an invalid <code>amount</code> when minting tokens in step 6, you will already have a token and a colony, so you can comment out steps 3 and 4 and use your colony address when calling <code>getColonyClientByAddress</code>.</em></p>
<h4 id="step-1-open-wallet">Step 1: Open Wallet<a class="headerlink" href="#step-1-open-wallet" title="Permanent link"></a></h4>
<p>First, you will need an instance of your Ethereum wallet, which you can get with <a href="/purser/modules-@colonypurser-software/">purser-software</a>. We recommend using a wallet that you use for testing.</p>
<p>Add the following code below <code>// Step 1: Open Wallet</code>:</p>
<pre><code class="language-js">
// Get a wallet instance
const wallet = await open({
  privateKey: process.env.PRIVATE_KEY,
});

// Check out the logs to see the wallet address
console.log('Wallet Address:', wallet.address);

</code></pre>
<h4 id="step-2-get-network-client">Step 2: Get Network Client<a class="headerlink" href="#step-2-get-network-client" title="Permanent link"></a></h4>
<p>Next, you will need to get an instance of the network client. The network client will allow you to call methods such as <code>createToken</code> and <code>createColony</code>.</p>
<p>Add the following code below <code>// Step 2: Get Network Client</code>:</p>
<pre><code class="language-js">
// Get a network client instance
const networkClient = await getNetworkClient('goerli', wallet);

// Check out the logs to see the network address
console.log('Network Address:', networkClient.contract.address);

</code></pre>
<h4 id="step-3-create-token">Step 3: Create Token<a class="headerlink" href="#step-3-create-token" title="Permanent link"></a></h4>
<p>Each colony has an internal token that will be used to calculate reputation within the colony. The internal token can be any ERC20 token but it cannot be changed after you create your colony. The next step will be creating a token using our standard <a href="https://github.com/JoinColony/colonyToken">colonyToken</a> contract.</p>
<p>Add the following code below <code>// Step 3: Create Token</code>:</p>
<pre><code class="language-js">
// Create a token
const createTokenTransaction = await networkClient.createToken.send({
  name: 'Token',
  symbol: 'TKN',
  decimals: 18,
});

// Set the token address
const tokenAddress = createTokenTransaction.meta.receipt.contractAddress;

// Check out the logs to see the token address
console.log('Token Address: ', tokenAddress);

</code></pre>
<h4 id="step-4-create-colony">Step 4: Create Colony<a class="headerlink" href="#step-4-create-colony" title="Permanent link"></a></h4>
<p>Now that you have a token, you can create a colony! A colony is a smart contract that will manage and govern your project, community, organization, or whatever you see fit.</p>
<p>Add the following code below <code>// Step 4: Create Colony</code>:</p>
<pre><code class="language-js">
// Create a colony
const createColonyResponse = await networkClient.createColony.send({
  tokenAddress,
});

// Set the colony address
const colonyAddress = createColonyResponse.eventData.colonyAddress;

// Check out the logs to see the colony address
console.log('Colony Address:', colonyAddress);

</code></pre>
<h4 id="step-5-get-colony-client">Step 5: Get Colony Client<a class="headerlink" href="#step-5-get-colony-client" title="Permanent link"></a></h4>
<p>In the previous step, you will use an instance of the network client to create a token and a colony but now you need to call methods specific to your colony, which will require the colony client.</p>
<p>Add the following code below <code>// Step 5: Get Colony Client</code>:</p>
<pre><code class="language-js">
// Get a colony client instance
const colonyClient = await networkClient.getColonyClientByAddress(colonyAddress);

</code></pre>
<p><em>Note: Just a friendly reminder. If you jumped ahead and started running the examples, you do not need to call <code>createToken</code> and <code>createColony</code> every time you run the script. You can use the token and colony you already created and update this method to use your colony address.</em></p>
<h4 id="step-6-mint-tokens">Step 6: Mint Tokens<a class="headerlink" href="#step-6-mint-tokens" title="Permanent link"></a></h4>
<p>In order to fund payments within your colony, you will first need to mint some tokens. If you did not change the input when calling <code>createToken</code>, which specified <code>18</code> decimals for your token, then the following <code>amount</code> will be equivalent to <code>1</code> token .</p>
<p>Add the following code below <code>// Step 6: Mint Tokens</code>:</p>
<pre><code class="language-js">
// Mint tokens
await colonyClient.tokenClient.mint.send({
  address: colonyAddress,
  amount: new BN('1000000000000000000'),
});

console.log('Tokens minted!');

</code></pre>
<h4 id="step-7-claim-colony-funds">Step 7: Claim Colony Funds<a class="headerlink" href="#step-7-claim-colony-funds" title="Permanent link"></a></h4>
<p>Great! You've minted your first token but before you can use it within your colony, you will need to claim it. Claiming colony funds will add any tokens owned by the colony contract to the funding pot associated with the root domain of the colony, which will also secure the availability of those funds.</p>
<p>Add the following code below <code>// Step 7: Claim Colony Funds</code>:</p>
<pre><code class="language-js">
// Claim colony funds
await colonyClient.claimColonyFunds.send({
  token: tokenAddress,
});

console.log('Colony funds claimed!');

</code></pre>
<h4 id="step-8-add-payment">Step 8: Add Payment<a class="headerlink" href="#step-8-add-payment" title="Permanent link"></a></h4>
<p>Now that you have funds available in the root domain of your colony, you can fund domains, tasks, and payments within your colony. The goal within this example is to make a payment, so the next step will be adding a payment to your colony.</p>
<p>You will use your wallet address as the recipient, which you can justify as your reward for all the hard work you put in to setting up your colony. You will also use the address of the token you assigned as the native token for your colony and the id of the root domain so that you will earn reputation at the root level of your colony.</p>
<p>Add the following code below <code>// Step 8: Add Payment</code>:</p>
<pre><code class="language-js">
// Add a payment
const addPaymentResponse = await colonyClient.addPayment.send({
  recipient: wallet.address,
  token: tokenAddress,
  amount: new BN('1000000000000000000'),
  domainId: 1,
});

// Set payment id and pot id
const { paymentId, potId } = addPaymentResponse.eventData;

// Check out the logs to see the payment data
console.log('Payment Data:', { paymentId, potId });

</code></pre>
<h4 id="step-9-move-funds">Step 9: Move Funds<a class="headerlink" href="#step-9-move-funds" title="Permanent link"></a></h4>
<p>Next, you will need to fund your payment by moving funds from the funding pot for the colony to the funding pot for the payment. Each payment within a colony has its own funding pot in order to ensure funds are secured for that payment.</p>
<p>Add the following code below <code>// Step 9: Move Funds</code>:</p>
<pre><code class="language-js">
// Move funds  between funding pots
await colonyClient.moveFundsBetweenPots.send({
  fromPot: 1,
  toPot: potId,
  amount: new BN('1000000000000000000'),
  token: tokenAddress,
});

console.log('Funds moved to payment pot!');

</code></pre>
<h4 id="step-10-finalize-payment">Step 10: Finalize Payment<a class="headerlink" href="#step-10-finalize-payment" title="Permanent link"></a></h4>
<p>Now that your payment has been funded, you can finalize it. A payment can only be finalized if the payment amount is available in the funding pot associated with the payment. There are additional methods available to update your payment, but once a payment is finalized, you will no longer be able to update it and the recipient will be able to claim the payment.</p>
<p>Add the following code below <code>// Step 10: Finalize Payment</code>:</p>
<pre><code class="language-js">
// Finalize a payment
await colonyClient.finalizePayment.send({ paymentId });

console.log('Payment finalized!');

</code></pre>
<h4 id="step-11-claim-payment">Step 11: Claim Payment<a class="headerlink" href="#step-11-claim-payment" title="Permanent link"></a></h4>
<p>Wahoo! All your hard work has paid off. It's time to claim your payment! Claiming your payment will transfer the payment amount to your wallet and reward you with reputation within your colony.</p>
<p>Add the following code below <code>// Step 11: Claim Payment</code>:</p>
<pre><code class="language-js">
// Claim a payment
await colonyClient.claimPayment.send({
  paymentId,
  token: tokenAddress,
});

console.log('Payment claimed!');

</code></pre>
<h4 id="execute-script">Execute Script<a class="headerlink" href="#execute-script" title="Permanent link"></a></h4>
<p>You now have all the steps you need to connect to the network, create a token, create a colony, and make a payment. Now just add your private key as an environment variable using <code>PRIVATE_KEY</code> and run <code>node colony</code> in your terminal.</p>
<pre><code>PRIVATE_KEY=&lt;private-key&gt; node colony
</code></pre>
<p>Congratulations! You created your first colony and made your first payment. Colonies are all about collaboration and a colony with one member who only makes payments to themselves is not a very attractive colony for others to join, so you should probably seek out some collaborators and reward them with some payments before paying yourself for any more of your "hard work".</p>
<hr />
<ul>
<li><strong>Kauri original title:</strong> Get Started with colonyJS</li>
<li><strong>Kauri original link:</strong> https://kauri.io/get-started-with-colonyjs/6325600fdb894517832a26a9cf0babc1/a</li>
<li><strong>Kauri original author:</strong> Ryan Christoffersen (@ryanchristo)</li>
<li><strong>Kauri original Publication date:</strong> 2019-09-16</li>
<li><strong>Kauri original tags:</strong> ethereum, colony, javascript</li>
<li><strong>Kauri original hash:</strong> QmZD3irBZwvQZ5W5od1vUVbgycq2XjLaq3iMSwhtApxNyg</li>
<li><strong>Kauri original checkpoint:</strong> Qmekp5iiDi5N5M4KdtAVGBEJEF3ahMgWYZJqL7s1qmkQ9g</li>
</ul>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../so-you-want-to-contribute-to-artemis/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../so-you-want-to-contribute-to-artemis/" class="btn btn-xs btn-link">
        So you want to contribute to Artemis?
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../visualizing-bitcoin-transactions-in-3d-and-virtua/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../visualizing-bitcoin-transactions-in-3d-and-virtua/" class="btn btn-xs btn-link">
        Visualizing Bitcoin Transactions in 3D and Virtual Reality
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
      <p>
        <a href="https://github.com/kauri-io/archive/edit/main/docs/single/get-started-with-colonyjs.md"><i class="fa fa-github"></i>
Edit on GitHub</a>
      </p>
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>